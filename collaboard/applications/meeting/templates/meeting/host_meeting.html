{% load static %}
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta content="width=device-width, initial-scale=1.0" name="viewport" />
        <title>{{ meeting.title }} - Host Control</title>
        <link href="{% static 'meeting/host_meeting.css' %}" rel="stylesheet" />
    </head>
    <body>
        <header class="top-bar">
            <div class="header-content">
                <div>
                    <h1>{{ meeting.title }}</h1>
                    <span class="badge host-badge">Host: {{ meeting.user.first_name }} {{meeting.user.last_name }}</span>
                </div>
                <div class="status-indicator" id="meeting-status"><span class="dot"></span> Meeting not started</div>
            </div>
        </header>

        <main class="dashboard-grid">
            <aside class="sidebar">
                <div class="card highlight-card">
                    <label>Access Code</label>
                    <div class="access-code" id="access-code">{{ meeting.access_code }}</div>
                    <small>Share with participants</small>
                </div>

                <div class="card controls-card">
                    <h2>Controls</h2>
                    <div class="button-stack">
                        <button class="btn btn-primary" id="start-btn">Start Meeting</button>
                        <button class="btn btn-secondary" disabled id="next-btn">Next Question</button>
                        <button class="btn btn-danger" disabled id="end-btn">End Meeting</button>
                    </div>
                </div>

                <div class="card details-card">
                    <h3>Details</h3>

                    <div class="description-block">
                        <label>About this meeting</label>
                        <p>{{ meeting.description|truncatechars:200 }}</p>
                    </div>

                    <div class="detail-row">
                        <span>Date</span>
                        <strong>{{ meeting.created_at|date:"M j, Y" }}</strong>
                    </div>
                    <div class="detail-row">
                        <span>Duration</span>
                        <strong><span id="duration">{{meeting.duration}}</span> min</strong>
                    </div>
                    <div class="detail-row">
                        <span>Participants</span>
                        <strong><span id="participant-count">0</span></strong>
                    </div>
                </div>
            </aside>

            <section class="main-content">
                <div class="card question-card">
                    <div class="card-header">
                        <h2>Current Question</h2>
                        <span class="counter"
                            >Q <span id="current-question-num">0</span> / <span id="total-questions">{{ meeting.questions.count }}</span></span
                        >
                    </div>

                    <div class="question-box">
                        <p id="question-text">Waiting to start...</p>
                    </div>

                    <div class="submission-area">
                        <div class="sub-header">
                            <label>Live Submissions</label>
                            <span id="submission-count">0 / 0</span>
                        </div>
                        <div class="progress-track">
                            <div class="progress-fill" id="submission-progress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>

                <div class="card participants-card">
                    <h2>Participants</h2>
                    <div class="scroll-list" id="participants-list">
                        <p class="empty-state">No participants joined yet.</p>
                    </div>
                </div>
            </section>
        </main>

        <script src="{% static 'meeting/host_meeting.js' %}"></script>
    </body>
</html>
